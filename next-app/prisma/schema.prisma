generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int       @id @default(autoincrement())
  name          String?
  email         String    @unique
  emailVerified Boolean?  @default(false)
  image         String?
  sessions      Session[]
  accounts      Account[]
  folders       Folder[]
  files         File[]
}

model Session {
  id            Int      @id @default(autoincrement())
  sessionToken  String   @unique
  expires       DateTime
  user          User     @relation(fields: [userId], references: [id])
  userId        Int
}

model Account {
  id               Int      @id @default(autoincrement())
  type             String
  provider         String
  providerAccId    String
  role             String?
  accessToken      String?
  expiresAt        DateTime?
  tokenType        String?
  scope            String?
  idToken          String?
  sessionState     String?
  refreshToken     String?
  user             User     @relation(fields: [userId], references: [id])
  userId           Int
}

model Folder {
  folderId     Int      @id
  name         String
  user         User     @relation(fields: [userId], references: [id])
  userId       Int
  outerFolder  Folder?  @relation("OuterFolder", fields: [outerFolderId], references: [folderId])
  outerFolderId Int?
  innerFolders Folder[] @relation("OuterFolder")
  files        File[]
  links        Link[]
}

model File {
  fileId      Int      @id
  denumire    String
  dimensiune  Float
  user        User     @relation(fields: [userId], references: [id])
  userId      Int
  folder      Folder   @relation(fields: [folderId], references: [folderId])
  folderId    Int
  links       Link[]
}

model Link {
  path         String   @id
  expires      DateTime?
  visibility   String
  permissions  String
  file         File     @relation(fields: [fileId], references: [fileId])
  fileId       Int
  folder       Folder   @relation(fields: [folderId], references: [folderId])
  folderId     Int
}
